---
published: true
layout: single
title: "2022-07-26-Normalization"
categories:
  - Modeling
tags:
  - [Normalization]

toc: true
toc_sticky: true

---
# 정규화
정규화는 이상현상이 있는 릴레이션을 분해하여 이상현상을 없애는 과정이다. 이상현상이 존재하는 릴레이션을 분해하여 여러 개의 릴레이션을 생성하게 된다. 이를 단계별로 구분하여 정규형이 높아질수록 이상현상은 줄어들게 된다.

> [이상현상과 함수 종속성이란?](https://code-lab1.tistory.com/47)

### **정규화의 장점**
-   데이터베이스 변경 시 이상 현상(Anomaly)을 제거할 수 있다.
-   정규화된 데이터베이스 구조에서는 새로운 데이터 형의 추가로 인한 확장 시, 그 구조를 변경하지 않아도 되거나 일부만 변경해도 된다.
-   데이터베이스와 연동된 응용 프로그램에 최소한의 영향만을 미치게 되어 응용프로그램의 생명을 연장시킨다.

### **정규화의 단점**
-   릴레이션의 분해로 인해 릴레이션 간의 JOIN연산이 많아진다.
-   질의에 대한 응답시간이 느려질 **수도** 있다. 데이터의 중복 속성을 제거하고 결정자에 의해 동일한 의미의 일반 속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 효과가 있다. 
-   따라서 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있다.
-   만약 조인이 많이 발생하여 성능저하가 나타나면 **반정규화(De-normalization)**를 적용할 수도 있다.

### 제 1 정규형 (1NF)
제 1정규형은 다음과 같은 규칙들을 만족해야 한다.

> 1. 각 컬럼이 하나의 속성만을 가져야 한다.  
> 2. 하나의 컬럼은 같은 종류나 타입(type)의 값을 가져야 한다.  
> 3. 각 컬럼이 유일한(unique) 이름을 가져야 한다.  
> 4. 칼럼의 순서가 상관없어야 한다.

![](https://raw.githubusercontent.com/Cloudblack/Forpicture/image//img/20220726160158.png)

-   각 컬럼이 하나의 값(속성)만을 가져야 한다. -> **불만족! 하나의 컬럼(과목)에 두 개의 값을 가짐**
-   하나의 컬럼은 같은 종류나 타입(type)의 값을 가져야 한다. -> **만족**
-   각 컬럼이 유일한(unique) 이름을 가져야 한다. -> **만족**
-   칼럼의 순서가 상관없어야 한다. -> **만족**

![](https://raw.githubusercontent.com/Cloudblack/Forpicture/image//img/20220726160214.png)

### 제 2정규형 (2NF)

제 2정규형은 다음과 같은 규칙을 만족해야 한다.

> 1. 1정규형을 만족해야 한다.  
> 2. 모든 컬럼이 부분적 종속(Partial Dependency)이 없어야 한다. == 모든 컬럼이 완전 함수 종속을 만족해야 한다.

부분적 종속이란 기본키 중에 특정 컬럼에만 종속되는 것이다. 

완전 함수 종속이란 기본키의 부분집합이 결정자가 되어선 안된다는 것이다. ( 비슷한 말이다 )
![](https://raw.githubusercontent.com/Cloudblack/Forpicture/image//img/20220726160320.png)

위와 같은 테이블과 FD 다이어그램을 보자.

성적의 특정 값을 알기 위해서는 학생 번호+과목이 있어야 한다. (ex : 102번의 자바 성적 70 )

하지만 특정 과목의 지도교수는 과목명만 알면 지도교수가 누군지 알 수 있다. (ex : 자바의 지도교수 박자바)

위 테이블에서 기본키는 (학생 번호, 과목)으로 복합키이다. 

그런데 이때 지도교수 칼럼은 (학생번호, 과목)에 종속되지 않고 (과목) 에만 종속되는 부분적 종속이다. 

![](https://raw.githubusercontent.com/Cloudblack/Forpicture/image//img/20220726160423.png)

### 제 3정규형 (3NF)

제 3정규형은 다음과 같은 규칙을 만족해야 한다.

> 1. 2정규형을 만족해야 한다.  
> 2. 기본키를 제외한 속성들간의 이행 종속성 (Transitive Dependency)이 없어야 한다.

이행 종속성이란 A->B, B->C 일 때 A->C 가 성립하면 이행 종속이라고 한다. 

![](https://raw.githubusercontent.com/Cloudblack/Forpicture/image//img/20220726160500.png)

위와 같은 테이블을 보자. ID를 알면 등급을 알 수 있다. 등급을 알면 할인율을 알 수 있다. 따라서 ID를 알면 할인율을 알 수 있다. 따라서 이행 종속성이 존재하므로 제 3정규형을 만족하지 않는다.

![](https://raw.githubusercontent.com/Cloudblack/Forpicture/image//img/20220726160528.png)
