---
layout: single
title: "2022-07-14"
categories:
  - TIL
tags:
  - [data]

toc: true
toc_sticky: true

---

# 빅데이터의 정착과 데이터 분석 기반

### 분산 시스템에 의한 데이터 처리의 고속화

데이터를 분석하기 위한 환경은 크게 바뀌었다
클라우드 서비스의 보급으로 기술적인 제약이 줄어들었고,
누구라도  데이터를 분석 할 수 있는 시대가 되었다.

하지만 빅데이터를 큰 어려움 없이 사용하기는 힘들다
첫번째는 데이터의 분석 방법을 모르는 다는 것
두번째는 데이터 처리에 수고와 시간이 걸린다는 점
이 두가지는 자전거의 바퀴와 같아 두가지를 갖춰야만 비로소 가치있는 정보를 얻을 수 있다



### 빅 데이터 기술의 요구

RDB로는 감당할 수 없는 대량의 데이터가 쌓이게 되었다
이런 빅데이터를 처리하기위해 다른 구조가 필요했다

- **Hadoop**
    - 다수의 컴퓨터에서 대량의 데이터 처리를 하기위한 시스템
    - 수백, 수천대의 컴퓨터를 이용해야할때 그것을 관리하는 것이 Hadoop
    - Hadoop은 MapReduce를 참고해 제작되었다
    - Java로 만들어져 간단히 사용하기 힘들었지만 SQL로 Hadoop을 실행 하는 
        HIVE가 개발되어 점차 사용자가 확대 되었다
- **NoSql**
    - 전통적인 RDB의 제약을 제거하는 것을 목표로한 데이터베이스의 총칭
        - Key - value store
            - 다수의 키와 값을 관련지어 저장
        - document store
            - Json과 같은 복잡한 데이터 구조를 저장
        - Wide column store
            - 여러 키를 사용해 높은 확장성을 제공
    - RDB보다 고속의 읽기, 쓰기가 가능하고 분산 처리에 뛰어나다는 특징
    - 모여진 데이터를 나중에 집계하는 것이 목적인 Hadoop과 다르게 
        Nosql은 애플리케이션에서 온라인으로 접속하는 데이터베이스



이 둘을 조합해 Nosql 데이터 베이스에 기록하고 Hadoop으로 분산 처리하는게
**현실적인 비용으로 데이터를 처리** 할 수 있게 된 것이 당시의 기술적인 배경이다



## 데이터 웨어하우스와의 공존

일부 기업은 이전부터 데이터 웨어 하우스를 사용하고 있었다
전통적인 데이터 웨어 하우스도 대량의 데이터를 처리할 수 있으며
오히려 여러방면에서 Hadoop보다 우수하다.

하지만 단점으로
일부 데이터 웨어 하우스 제품은 안정적인 성능을 실현하기 위해 
하드웨어와 스프트웨어가 통합된 통합 장비로 제공되었는데
데이터 용량을 늘리려면 하드웨어를 교체해야 하는 등 확장하기가 쉽지 않았다.

따라서, 가속도로 늘어나는 데이터 처리는 Hadoop에 맡기고 
비교적 작은데이터, 혹은 중요한 데이터만을 데이터 웨어 하우스에 넣는 식으로 사용하게 되었다

![image-20220714113037360](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714113037360.png)



이전의 데이터 웨어 하우스는 대기업의 IT 부서가 상당한 노력을 들여 구축해야하는 매우 한정된 것이었지만
클라우드 시대인 요즘은 시간 단위로 필요한 자원을 확보 할 수 있어 
방법만 알면 언제든 이용할 수 있는 환경이 되었다



### 스몰 데이터와 빅데이터

스몰 데이터의 기술도 중요하다

스몰데이터는 한대의 컴퓨터로도 큰 부담없이 처리 할 수 있는 만큼의 작은 데이터인데 
레코드 수로는 수백만에서 수천만 , 수GB 까지 이다

사실 빅데이터와 스몰데이터 모두 그냥 데이터이다
처리를 감당 할 수 없어 버려졌던 대량의 빅데이터, 하지만 데이터 분석은 스몰 데이터 시절부터
이미 존재하고 있었다 결국은 **효율** 문제이다

사내에 작성된 Excel, CSV 파일등 대량의 스몰데이터로 가득 차 있다
스몰데이터 처리방법과 빅데이터 처리방법 둘을 적재 적소에 사용하는것이 바람직하다

### BI도구

- business intelligence tool

경영자용 시각화 시스템으로 개인이 사용 할 수 있게끔 단순화 시킨 것 이다

![image-20220714114006051](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714114006051.png)



## 빅데이터의 기술



### 데이터 파이프라인

일반적으로 차례대로 전달해나가는 데이터로 구성된 시스템이며
어디에서 데이터를 수집하여 무엇을 실현할 것인가에 따라 변화한다

#### 데이터 수집

데이터 파이프라인은 데이터를 모으는 부분부터 시작한다

데이터 전송의 방법은 크게 두가지가 있다

![image-20220714114326185](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714114326185.png)

- 벌크 형
    - 이미 존재하는 데이터를 정리해 추출하는 방법
    - 데이터베이스와 파일 서버등에서 정기적으로 데이터를 수집하는데 사용
- 스트리밍 형
    - 차례차례로 생성되는 데이터를 끊임없이 계속해서 보내는 방법
    - 모바일 앱 서비스 등에서 데이터를 수집할때 사용

#### 스트림 처리와 배치 처리

기존은 주로 벌크 형 방법을 이용했지만
모바일 앱 과 서비스등이 증가하면서 스트리밍 형이 주류가 되고있다

실시간 데이터 처리를 **스트림 처리**라고 한다.
스트림 처리는 지금 무슨 일이 일어나고 있는지 즉시 알 수 있다.

장기적인 데이터를 분석하기 위해서는 보다 대량의 데이터를 처리하는 데 적합한 분산 시스템이 좋다
어느정도 정리된 데이터를 효율적으로 가공하기 위한 **배치 처리**가 필요하다

#### 분산 스토리지

여러 컴퓨터와 디스크로 구성된 스토리지 시스템을 말한다.

데이터를 저장하는 방법에는 몇가지 선택이있는데 대표적인게
**객체 스토리지**로 한 덩어리로 모인 데이터에 이름을 부여해 파일로 저장한다
Ex) Amazon S3

NoSQL을 분산 스토리지로 사용 할 수도있다 단, 나중에 용량을 얼마든지 늘릴 수 있는 확장성 높은 제품을 선택해야 할 것이다.

#### 분산 데이터 처리

분산 스토리지에 저장된 데이터를 처리하기 위해 **분산 데이터 처리** 프레임워크가 필요하다.

분산 데이터 처리의 역할은 나중에 분석하기 쉽도록 데이터를 가공해서 결과를 외부 데이터 베이스에 저장하는 것

데이터 웨어하우스 제품을 이용할때, 이를 위해 분산 스토리지에서 추출한 데이터를 웨어하우스에 적합한 형식으로 변환한다
이 일련의 절차를 **ETL(extract, Transform, Load)프로세스** 라고 부른다.

![image-20220714122320473](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714122320473.png)

#### 데이터 파이프라인의 큰 흐름은 변하지 않는다

빅데이터를 다루기 위해선 어떤 도구를 사용할지 선택해야한다. 
기본적으로 두가지를 고려한다

- 저장할 수 있는 데이터 용량에 제한이 없을 것
- 데이터를 효율적으로 추출할 수단이 있을 것

새로운 도구가 계속 생겨나지만 데이터 파이프라인의 전체 흐름은 변하지 않는다

1. 데이터를 모으고
2. 데이터를 처리
3. 데이터를 축적

![image-20220714123918431](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714123918431.png)



#### 워크플로우 관리

데이터 파이프라인이 복잡해질수록 한곳에서 제어할 필요가 있다
그래서 전체 데이터 파이프라인의 동작을 관리하기 위해 **워크플로우 관리** 기술을 사용한다
매일 정해진 시간에 배치 처리를 스케줄대로 실행하고 오류가 발생한 경우 관리자에게 통지한다



#### 데이터 웨어 하우스와 데이터 마트

- 데이터 파이프라인의 기본형

![image-20220714122413497](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714122413497.png)

데이터 웨어 하우스는
**대량의 데이터를 장기 보존하고 한번에 전송하는데 최적화 되어있다**
소량의 데이터를 자주 쓰고 읽는데는 적합하지 않다

업무에 있어 중요한 데이터 처리에 사용되기에 아무때나 함부로 사용해 
시스템에 과부하를 초래하면안된다.
그래서 분석같은 업무를 위해 따로 **데이터 마트**를 구축한다
또 데이터 마트는 BI 툴과 조합시키는 형태로 많이 사용한다

#### 데이터 레이크

- 데이터를 그대로 축적

모든 데이터를 데이터 웨어하우스에 맞춰 넣을 수 는없다, 변형해선 안되는 데이터도 있을 것이다.
우선 데이터가 존재하고 나중에 테이블을 설계하는것이 빅데이터이다.

그래서 데이터를 원형 그대로 보관할 장소가 필요했고
여러 곳에서 데이터가 흘러들어오는 데이터의 호수를 **데이터 레이크**라고 부른다

- 임의의 데이터를 저장할 수 있는 분산 스토리지
- 데이터 형식은 자유, 하지만 대부분 CSV나 JSON등 범용적인 형식을 사용

![image-20220714123225632](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714123225632.png)

![image-20220714123234246](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714123234246.png)

#### 데이터 엔지니어와 분석가의 역할

![image-20220714123515070](https://raw.githubusercontent.com/Cloudblack/Forpicture/image/img/image-20220714123515070.png)

